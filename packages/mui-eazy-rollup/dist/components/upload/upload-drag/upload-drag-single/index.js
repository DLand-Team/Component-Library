import{j as e}from"../../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js";import{useState as o,useEffect as t}from"react";import{useDropzone as r}from"../../../../node_modules/.pnpm/react-dropzone@14.2.3_react@18.2.0/node_modules/react-dropzone/dist/es/index.js";import{Iconify as i}from"../../../iconify/iconify.js";import n from"./preview-single-file.js";import a from"../../ic-eva_cloud-upload-fill.svg.js";import{CircularProgress as s}from"@mui/material";import{useBoolean as l}from"../../../../hooks/use-boolean.js";import m from"../../../../node_modules/.pnpm/@mui_material@5.15.10_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.57_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Stack/Stack.js";import p from"../../../../node_modules/.pnpm/@mui_material@5.15.10_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.57_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js";import c from"../../../../node_modules/.pnpm/@mui_material@5.15.10_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.57_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Typography/Typography.js";import d from"../../../../node_modules/.pnpm/@mui_material@5.15.10_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.57_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/IconButton/IconButton.js";import{alpha as u}from"@mui/system";function _({disabled:_,multiple:g=!1,error:x,placeholder:f,helperText:y,onDel:h,onDelete:j,files:b,thumbnail:v,onUpload:k,onRemove:w,onAdd:A,onRemoveAll:D,sx:I,uploadAction:z,uploadLoabel:B,...R}){const S=l(!1),[C,T]=o(b||[]),[F,E]=o([]),{getRootProps:P,getInputProps:U,isDragActive:G,isDragReject:L}=r({multiple:g,disabled:_,onDropAccepted:()=>{document.body.focus()},onDrop:async e=>{if(h?.(C?.[0]),S.onTrue(),e[0]){const o=await(z?.(e[0]).finally((()=>{S.onFalse()})));o&&(A?.(o),E([...F,...e]))}},...R});t((()=>{b&&T(b)}),[b]);const W=C.length>0,q=L||!!x,H=e.jsxs(m,{spacing:3,alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:[e.jsx(p,{component:"img",src:a,sx:{width:52,height:52,flexShrink:0,...I}}),e.jsx(m,{spacing:1,sx:{textAlign:"center"},children:f||B?e.jsx(e.Fragment,{children:B}):e.jsx(c,{sx:{color:"#919EAB",fontSize:"14px"},children:"Drag and drop or click to choose files"})})]}),J=!g&&e.jsx(n,{type:F?.[0]?.type,imgUrl:"string"==typeof C?.[0]?C?.[0]:""}),K=W&&h&&e.jsx(d,{size:"small",onClick:()=>{h?.(C?.[0])},sx:{top:16,right:16,zIndex:9,position:"absolute",color:e=>u(e.palette.common.white,.8),bgcolor:e=>u(e.palette.grey[900],.72),"&:hover":{bgcolor:e=>u(e.palette.grey[900],.48)}},children:e.jsx(i,{icon:"mingcute:close-line",width:18})});return e.jsxs(p,{sx:{width:1,position:"relative",...I},children:[e.jsxs(p,{...P(),sx:{p:5,outline:"none",borderRadius:"var(--radius-15, 12px)",cursor:"pointer",overflow:"hidden",position:"relative",background:"var(--grey-8, rgba(145, 158, 171, 0.08))",border:"1px dashed var(--Scaling-Grey2, #696969)",transition:e=>e.transitions.create(["opacity","padding"]),"&:hover":{opacity:.72},...G&&{opacity:.72},..._&&{opacity:.48,pointerEvents:"none"},...q&&{color:"error.main",borderColor:"error.main",bgcolor:e=>u(e.palette.error.main,.08)},...W&&{padding:"24% 0"}},children:[e.jsx("input",{...U()}),W?J:H,S.value&&e.jsx(p,{sx:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(s,{color:"inherit"})})]}),K,y&&y]})}export{_ as UploadDragSingle};
