import{j as e}from"../../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js";import{CircularProgress as o}from"@mui/material";import{useState as t,useEffect as r}from"react";import i from"../cropModal.js";import{useDropzone as n}from"../../../../node_modules/.pnpm/react-dropzone@14.2.3_react@18.2.0/node_modules/react-dropzone/dist/es/index.js";import{useBoolean as a}from"../../../../hooks/use-boolean.js";import s from"../../ic-eva_cloud-upload-fill.svg.js";import l from"./preview-multi-file.js";import m from"../../../../node_modules/.pnpm/@mui_material@5.15.7_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.54_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Stack/Stack.js";import d from"../../../../node_modules/.pnpm/@mui_material@5.15.7_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.54_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js";import c from"../../../../node_modules/.pnpm/@mui_material@5.15.7_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.54_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Typography/Typography.js";import p from"../../../../node_modules/.pnpm/@mui_material@5.15.7_@emotion_react@11.11.3_@emotion_styled@11.11.0_@types_react@18.2.54_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Button/Button.js";import{alpha as u}from"@mui/system";function _({onDel:_,onDelete:x,onUpload:f,onRemove:h,onAdd:j,onRemoveAll:y,uploadAction:g,onOrder:v,validateFunc:b,disabled:w,multiple:A=!1,error:R,placeholder:k,helperText:C,sx:D,files:F,thumbnail:S,isCrop:z,uploadLoabel:B,...T}){const[I,L]=t(""),[E,O]=t(!1),[P,U]=t(""),G=a(!1),[M,N]=t([]),[W,q]=t(F||[]);r((()=>{F&&q(F)}),[F]);const{getRootProps:H,getInputProps:J,isDragActive:K,isDragReject:Q}=n({multiple:A,disabled:w,onDropAccepted:()=>{document.body.focus()},onDrop:async e=>{if(z)o=e[0],t=o=>{L(o),U(e[0].name),O(!0)},(r=new FileReader).onload=function(){t(r.result)},r.readAsDataURL(o);else{G.onTrue();const o=await(g?.(e[0]).finally((()=>{G.onFalse()})));o&&(j?.(o),N([...M,...e]))}var o,t,r},...T}),V=W.length,X=Q||!!R,Y=e.jsxs(m,{spacing:3,alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:[e.jsx(d,{component:"img",src:s,sx:{width:52,height:52,flexShrink:0,...D}}),e.jsx(m,{spacing:1,sx:{textAlign:"center"},children:k||B?e.jsx(e.Fragment,{children:B}):e.jsx(c,{sx:{color:"#919EAB",fontSize:"14px"},children:"Drag and drop or click to choose files"})})]}),Z=(V||W.length>0)&&e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{my:3},children:e.jsx(l,{moveCard:(e,o)=>{const t=[...W];let r=t[e];t[e]=t[o],t[o]=r,v?.(t)},onRemove:(e,o)=>{"string"==typeof e&&(_?.(e),"number"==typeof o&&(W.splice(o,1),M.splice(o,1),q([...W]),N([...M])))},files:M,fileNameList:W})}),e.jsx(m,{direction:"row",justifyContent:"flex-end",spacing:1.5,children:y&&e.jsx(p,{color:"inherit",variant:"outlined",size:"small",onClick:y,children:"Remove All"})})]});return e.jsxs(d,{sx:{width:1,position:"relative",...D},children:[e.jsxs(d,{...H(),sx:{p:5,outline:"none",borderRadius:"var(--radius-15, 12px)",cursor:"pointer",overflow:"hidden",position:"relative",bgcolor:e=>u(e.palette.grey[500],.08),border:"1px dashed var(--Scaling-Grey2, #696969)",transition:e=>e.transitions.create(["opacity","padding"]),"&:hover":{opacity:.72},...K&&{opacity:.72},...w&&{opacity:.48,pointerEvents:"none"},...X&&{color:"error.main",borderColor:"error.main",bgcolor:e=>u(e.palette.error.main,.08)}},children:[e.jsx("input",{...J()}),Y]}),G.value&&e.jsx(d,{sx:{position:"absolute",top:-10,bottom:-10,left:-10,right:-10,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(5px)",boxShadow:"inset 0 0 6px rgba(255, 255, 255, 0.2)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},children:e.jsx(o,{color:"inherit"})}),e.jsx(i,{name:P,onComplete:async e=>{G.onTrue();const o=await(g?.(e).finally((()=>{G.onFalse()})));o&&(j?.(o),N([...M,e]))},src:I,open:E,setOpen:()=>{E&&(O(!1),L(""),U(""))},validateFunc:b}),C&&C,Z]})}export{_ as UploadDragMul};
