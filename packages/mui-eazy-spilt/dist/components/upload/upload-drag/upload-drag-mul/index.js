import{j as e}from"../../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js";import{CircularProgress as o}from"@mui/material";import{useState as t,useEffect as r}from"react";import i from"../cropModal.js";import{useDropzone as n}from"../../../../node_modules/.pnpm/react-dropzone@14.2.3_react@18.2.0/node_modules/react-dropzone/dist/es/index.js";import{useBoolean as a}from"../../../../hooks/use-boolean.js";import s from"../../ic-eva_cloud-upload-fill.svg.js";import l from"./preview-multi-file.js";import m from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Stack/Stack.js";import d from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js";import c from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Typography/Typography.js";import p from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Button/Button.js";import{alpha as u}from"@mui/system";function _({onDel:_,onDelete:x,onUpload:f,onRemove:h,onAdd:j,onRemoveAll:y,uploadAction:g,onOrder:v,validateFunc:b,disabled:w,multiple:A=!1,error:R,placeholder:k,helperText:C,sx:D,files:F,thumbnail:S,isCrop:z,...B}){const[T,I]=t(""),[E,L]=t(!1),[O,P]=t(""),U=a(!1),[G,M]=t([]),[N,W]=t(F||[]);r((()=>{F&&W(F)}),[F]);const{getRootProps:q,getInputProps:H,isDragActive:J,isDragReject:K}=n({multiple:A,disabled:w,onDropAccepted:()=>{document.body.focus()},onDrop:async e=>{if(z)o=e[0],t=o=>{I(o),P(e[0].name),L(!0)},(r=new FileReader).onload=function(){t(r.result)},r.readAsDataURL(o);else{U.onTrue();const o=await(g?.(e[0]).finally((()=>{U.onFalse()})));o&&(j?.(o),M([...G,...e]))}var o,t,r},...B}),Q=N.length,V=K||!!R,X=e.jsxs(m,{spacing:3,alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:[e.jsx(d,{component:"img",src:s,sx:{width:52,height:52,flexShrink:0,...D}}),e.jsx(m,{spacing:1,sx:{textAlign:"center"},children:k||e.jsx(c,{sx:{color:"#919EAB",fontSize:"14px"},children:"Drag and drop or click to choose files"})})]}),Y=(Q||N.length>0)&&e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{my:3},children:e.jsx(l,{moveCard:(e,o)=>{const t=[...N];let r=t[e];t[e]=t[o],t[o]=r,v?.(t)},onRemove:(e,o)=>{"string"==typeof e&&(_?.(e),"number"==typeof o&&(N.splice(o,1),G.splice(o,1),W([...N]),M([...G])))},fileNameList:N})}),e.jsx(m,{direction:"row",justifyContent:"flex-end",spacing:1.5,children:y&&e.jsx(p,{color:"inherit",variant:"outlined",size:"small",onClick:y,children:"Remove All"})})]});return e.jsxs(d,{sx:{width:1,position:"relative",...D},children:[e.jsxs(d,{...q(),sx:{p:5,outline:"none",borderRadius:"var(--radius-15, 12px)",cursor:"pointer",overflow:"hidden",position:"relative",bgcolor:e=>u(e.palette.grey[500],.08),border:"1px dashed var(--Scaling-Grey2, #696969)",transition:e=>e.transitions.create(["opacity","padding"]),"&:hover":{opacity:.72},...J&&{opacity:.72},...w&&{opacity:.48,pointerEvents:"none"},...V&&{color:"error.main",borderColor:"error.main",bgcolor:e=>u(e.palette.error.main,.08)}},children:[e.jsx("input",{...H()}),X]}),U.value&&e.jsx(d,{sx:{position:"absolute",top:-10,bottom:-10,left:-10,right:-10,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(5px)",boxShadow:"inset 0 0 6px rgba(255, 255, 255, 0.2)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10},children:e.jsx(o,{color:"inherit"})}),e.jsx(i,{name:O,onComplete:async e=>{U.onTrue();const o=await(g?.(e).finally((()=>{U.onFalse()})));o&&(j?.(o),M([...G,e]))},src:T,open:E,setOpen:()=>{E&&(L(!1),I(""),P(""))},validateFunc:b}),C&&C,Y]})}export{_ as UploadDragMul};
